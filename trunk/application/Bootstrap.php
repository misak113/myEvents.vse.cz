<?php/** * Uvodni inicializace aplikace * */class Bootstrap extends Zend_Application_Bootstrap_Bootstrap {	/**	 * @return Nette\DI\Container	 */	protected function _initContext() {		//ZetteLoader		Zend_Loader::loadClass('\Zette\DI\Loader');		$zetteLoader = new \Zette\DI\Loader();		$zetteLoader->load();		$context = $zetteLoader->getContext();		return $context;	}	/**	 * Prida do include path adresar s modely	 */	protected function _initIncludePath() {        $rootDir = dirname(dirname(__FILE__));        set_include_path(get_include_path()            . PATH_SEPARATOR . $rootDir. '/application/models'        );	}	protected function _initView()	{		$context = $view = $this->getResource('context');		$view = new \Zette\LatteView();		if (method_exists($view, 'setContext')) {			$this->context->callMethod(array($view, 'setContext'));		}		Zend_Registry::set('view', $view);		$this->bootstrap('frontController');		$frontController = $this->getResource('frontController');		$viewRenderer = Zend_Controller_Action_HelperBroker::getStaticHelper('ViewRenderer');		$viewRenderer->setView($view)				->setViewScriptPathSpec(':controller/:action.:suffix')				->setViewSuffix('latte');		$inflector = new Zend_Filter_Inflector(':script.:suffix');		$inflector->addRules(			array(				'script' => 'layout',				'suffix' => 'latte'			)		);		Zend_Layout::startMvc(			array(				'view' => $view,				'inflector' => $inflector			)		);		Zend_Controller_Action_HelperBroker::addHelper($viewRenderer);		return $view;	}	/**	 * Nastaveni DOCTYPE webu	 *	 */	protected function _initDoctype() {		$view = $this->getResource('view');		$view->doctype('HTML5');	}	/**	 *	 * Nastaveni helperu	 *	 */	protected function _initHelpers() {		$view = $this->getResource('view');		$prefix = 'My_View_Helper';		$dir = APPLICATION_PATH . '/../library/My/View/Helper';		$view->addHelperPath($dir, $prefix);	}	/**	 * Nastaveni prepisu URL	 *	 * @param array $options	 */	protected function _initRequest(array $options = array()) {		$this->bootstrap('FrontController');		$frontController = $this->getResource('FrontController');		$router = $frontController->getRouter();		// Statics		$router->addRoute('aboutUs', new Zend_Controller_Router_Route('o-nas', array(				'module' => 'default',				'controller' => 'index',				'action' => 'about',			))		);		$router->addRoute('contact', new Zend_Controller_Router_Route('kontakt', array(				'module' => 'default',				'controller' => 'index',				'action' => 'contact',			))		);		// Events		$router->addRoute('eventList', new Zend_Controller_Router_Route('udalosti', array(				'module' => 'default',				'controller' => 'index',				'action' => 'index',			))		);		$router->addRoute('event', new Zend_Controller_Router_Route('udalost/:id/:title', array(				'module' => 'default',				'controller' => 'event',				'action' => 'detail',			), array(				'id' => '\d+',			))		);		// Landing page @todo smazat pro real pages		$router->addRoute('landing', new Zend_Controller_Router_Route('', array(				'module' => 'landing',				'controller' => 'index',				'action' => 'index',			))		);	}}